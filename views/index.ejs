<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="pokedex.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <title>Pokedex</title>
</head>
<body>
    <div class="container">
        <h1>Pokedex</h1>

        <!-- Formulario para buscar Pokémon por nombre -->
        <form action="/search/<%= pokemon ? pokemon.name : '' %>" method="get">
            <input type="text" name="name" placeholder="Buscar Pokémon por nombre" class="form-control">
            <button type="submit" class="btn btn-primary mt-3">Buscar</button>
        </form>

        <% if (pokemon) { %>
        <!-- Mostrar información del Pokémon encontrado -->
        <div class="pokemon-info mt-5">
            <h3 class="text-center"><%= pokemon.name %> Base Stats</h3>
            <img src="<%= pokemon.image %>" alt="<%= pokemon.name %>" class="mx-auto d-block mb-3">

            <!-- Barras de progreso para las estadísticas del Pokémon -->
            <div class="progress-item">
                <div class="progress-label">HP</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-danger" role="progressbar" style="width: <%= pokemon.stats.hp %>%" aria-valuenow="<%= pokemon.stats.hp %>" aria-valuemin="0" aria-valuemax="100"><%= pokemon.stats.hp %>%</div>
                </div>

                <div class="progress-label">ATK</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: <%= pokemon.stats.atk %>%" aria-valuenow="<%= pokemon.stats.atk %>" aria-valuemin="0" aria-valuemax="100"><%= pokemon.stats.atk %>%</div>
                </div>

                <div class="progress-label">DEF</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-info" role="progressbar" style="width: <%= pokemon.stats.def %>%" aria-valuenow="<%= pokemon.stats.def %>" aria-valuemin="0" aria-valuemax="100"><%= pokemon.stats.def %>%</div>
                </div>

                <div class="progress-label">SPD</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-success" role="progressbar" style="width: <%= pokemon.stats.spd %>%" aria-valuenow="<%= pokemon.stats.spd %>" aria-valuemin="0" aria-valuemax="100"><%= pokemon.stats.spd %>%</div>
                </div>

                <div class="progress-label">EXP</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-success" role="progressbar" style="width: <%= pokemon.experience %>%" aria-valuenow="<%= pokemon.experience %>" aria-valuemin="0" aria-valuemax="100"><%= pokemon.experience %>%</div>
                </div>
            </div>
        </div>
        <% } else { %>
        <!-- Listado de Pokémon cuando no hay una búsqueda activa -->
        <% Pokedex.forEach(function(Pokemones){ %>
        <div class="pokemon-list mt-5">
            <h3 class="text-center"><%= Pokemones.name %> Base Stats</h3>

            <div class="progress-item">
                <div class="progress-label">HP</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-danger" role="progressbar" style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100">90%</div>
                </div>

                <div class="progress-label">ATK</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100">80%</div>
                </div>

                <div class="progress-label">DEF</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-info" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">60%</div>
                </div>

                <div class="progress-label">SPD</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100">70%</div>
                </div>

                <div class="progress-label">EXP</div>
                <div class="progress mb-3">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 40%" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100">40%</div>
                </div>
            </div>
        </div>
        <% }) %>
        <% } %>

        <button onclick='next("<%= next %>")' type="button" class="btn btn-info mt-3">Next</button>
    </div>
    <script src="./JavaScript/home.js"></script>
</body>
</html>
